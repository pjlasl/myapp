<div *ngFor="let email of emails">
  <email-row-item
    [email]="email"
    [missionActive]="active"
    (onClick)="openEmail(email.id)"
  ></email-row-item>

  <ng-template #step1>
    <div class="flex-column">
      <div
        class="flex-row"
        style="
          flex: 1;
          border-top: 1px solid var(--surface-border);
          border-bottom: 1px solid var(--surface-border);
          margin: 0.5em 0;
        "
      >
        <p-button
          [plain]="true"
          [text]="true"
          (click)="sendReply1()"
          [disabled]="email.actionComplete"
          label="Reply"
          icon="fas fa-reply"
        >
        </p-button>
      </div>
      <div class="flex-column" style="gap: 0.5em">
        <span> Hey Bro! </span>
        <span>
          Hope you're hanging in there! I came across this opportunity that
          could help us make some quick cash, ut I gotta be upfront - it's a bit
          risky. There's potential for big returns, but we need to weigh the
          pros and cons carefully before jumping in. Let me know if you're
          interested, and we can discuss it further.
        </span>
        <span> Cheers, Jack </span>
      </div>
    </div>
  </ng-template>

  <ng-template #step2>
    <div class="flex-column">
      <div
        class="flex-row"
        style="
          flex: 1;
          border-top: 1px solid var(--surface-border);
          border-bottom: 1px solid var(--surface-border);
          margin: 0.5em 0;
        "
      >
        <p-button
          [plain]="true"
          [text]="true"
          (click)="sendReply2()"
          [disabled]="hasTerminal() || !email.actionComplete"
          label="Reply"
          icon="fas fa-reply"
        >
        </p-button>
      </div>
      <div class="flex-column" style="gap: 0.5em">
        <span>Hey {{user.info.firstName}}!</span>
        <span>
          Way to go on taking the leap with the new venture! I'm proud of you
          for seizing the opportunity. Now, to get started, here's what you need
          to do: head over to
          <a
            style="font-weight: 600; text-decoration: underline"
            (click)="goToShop()"
            >this shop</a
          >
          and purchase the "Terminal" software.
        </span>
        <span>
          Once you've got it installed, we'll be on our way to making things
          happen.<br />
          Reply back to me once you have the software installed.
        </span>
        <span>Excited to see where this takes us!</span>
        <span>Cheers, Jack</span>
      </div>
    </div>
  </ng-template>

  <ng-template #step3>
    <div class="flex-column">
      <div
        class="flex-row"
        style="
          flex: 1;
          border-top: 1px solid var(--surface-border);
          border-bottom: 1px solid var(--surface-border);
          margin: 0.5em 0;
        "
      >
        <p-button
          [plain]="true"
          [text]="true"
          (click)="sendReply3()"
          [disabled]="!hasAttachments()"
          label="Reply"
          icon="fas fa-reply"
        >
        </p-button>
        <div class="flex-row" style="gap: 0.5em">
          <p-button
            [plain]="true"
            [text]="true"
            label="Terminal Addons.zip"
            icon="fas fa-paperclip"
            [disabled]="hasAttachments()"
            (click)="downloadAttachments()"
          >
          </p-button>
        </div>
      </div>
      <div class="flex-column" style="gap: 0.5em">
        <span>Hey {{user.info.firstName}},</span>
        <span>
          Now that you have downloaded and installed the software, I guess I
          should explain a little about the company I work for.
        </span>
        <span>
          So, I've been working for this company for a while now, and let's just
          say it operates in a bit of a gray area of legality. We're into some
          pretty interesting stuff, walking that fine line between what's
          totally legit and what's, well, not so much. But hey, it keeps things
          exciting, right? We've got a talented team, and despite the risks,
          there's some serious potential for growth and profit.
        </span>
        <span>
          Attached you will find a .zip file containing some addons for the
          "Terminal" program. These addons are no longer available for purchase
          at the request of the application author. It is a good thing my
          company has copies!
        </span>
        <span>
          Once you have downloaded and installed the addons, reply to this email
          and I will send further instructions.
        </span>

        <span>How Exciting! Jack</span>
      </div>
    </div>
  </ng-template>

  <ng-template #step4>
    <div class="flex-column">
      <div>
        <p>Almost there {{user.info.firstName}},</p>
        <p>
          I think by now you have figured out what the terminal program and its
          addons do and before you say, "Jack, what have you gotten me into?!",
          I know you have been struggling to make ends meet and not a single
          company has given you a chance.
        </p>
        <p>
          I spoke with my supervisor and told him all about you. This is a great
          opportunity for you to make some money on the side and maybe even have
          a team under you in the future.
        </p>
        <p>
          I'll reach out to you soon. In the meantime, gather some cash and
          level up your experience.
        </p>
        <p>Good luck and have fun! Jack</p>
      </div>
      <div>
        <p-messages severity="success">
          <ng-template pTemplate>
            <div class="flex-row" style="justify-content: center; flex: 1">
              Assignment Complete: +100 XP
            </div>
          </ng-template>
        </p-messages>
      </div>
    </div>
  </ng-template>
</div>
